// @FILE-INFO: viewer.js | ./
// TYPE: Web Tool Logic
// LAYER: Business (Logic)
// SIZE: 650 lines (Large)
// PROVIDES: Standalone schedule viewing functionality

document.addEventListener('DOMContentLoaded', () => {
    // === HELPER FUNCTIONS ===
    const toTitleCase = (str) => {
        if (!str) return '';
        return str.toLowerCase().split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
    };

    const formatScheduleEntry = (entry) => {
        if (!entry) return '';
        return entry
            .replace(/Bkat_(\d)/g, 'Β Κατευθ. $1: ')
            .replace(/Γkat_(\d)/g, 'Γ Κατευθ. $1: ')
            .replace(/_/g, ' ');
    };

    // === SCHEDULE DATA ===
    const teacherSchedules = {
        'Αλεξάνδρου Χριστίνα': { 'Δευτέρα': { 3: 'Γ52+Γ53', 4: 'Β11+Β32', 5: 'Α31+Α32', 8: 'Γ41+Γ51' }, 'Τρίτη': { 1: 'Γ1+Γ31+Γ32', 2: 'Γ1+Γ31+Γ32', 5: 'Α11+Α43', 6: 'Β33+Β51+B52' }, 'Τετάρτη': { 4: 'Α21+A22', 5: 'Α41+Α42', 6: 'Α31+Α32' }, 'Πέμπτη': { 3: 'Β33+Β51+B52', 4: 'Γ41+Γ51', 8: 'Γ52+Γ53' }, 'Παρασκευή': { 3: 'Α23+Α24', 4: 'Α21+A22', 5: 'Β31+Β41', 6: 'Β11+Β32' } },
        'Αντωνίου Νίκη': { 'Δευτέρα': { 5: 'A11', 6: 'A21' }, 'Τρίτη': { 7: 'A31' }, 'Τετάρτη': { 1: 'A11', 2: 'A31' }, 'Πέμπτη': { 3: 'A11' }, 'Παρασκευή': { 4: 'A11', 5: 'A21' } },
        'Αντωνίου Στέλλα': { 'Τρίτη': { 1: 'Γ1+Γ31+Γ32', 2: 'Γ1+Γ31+Γ32' } },
        'Αντωνούρη Άννα': { 'Δευτέρα': { 1: 'A32', 3: 'B51', 4: 'B51' }, 'Τρίτη': { 1: 'B1', 4: 'A11', 6: 'A11', 7: 'A32' }, 'Τετάρτη': { 2: 'B1', 4: 'B1', 5: 'A11' }, 'Πέμπτη': { 2: 'B1', 6: 'A11' }, 'Παρασκευή': { 2: 'A24', 3: 'A24', 4: 'B51', 7: 'B51' } },
        'Βασιλείου Ηλίας': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2', 6: 'A41' }, 'Τρίτη': { 1: 'B52', 2: 'B41', 5: 'A41' }, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2', 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': { 1: 'Γkat_1', 2: 'Γkat_1', 6: 'Γkat_1', 7: 'Γkat_1' }, 'Παρασκευή': { 3: 'B41', 4: 'B41', 6: 'B52' } },
        'Γαβριήλ Αφρούλα': { 'Δευτέρα': { 4: 'Γ51', 5: 'B1', 6: 'Γ51' }, 'Τρίτη': { 1: 'Γ51', 5: 'B32', 6: 'B1', 7: 'B1' }, 'Τετάρτη': { 1: 'B1', 3: 'B1', 6: 'Γ51' }, 'Πέμπτη': { 4: 'B52', 5: 'B32', 6: 'B1' }, 'Παρασκευή': { 2: 'Γ51', 4: 'B1', 5: 'B1' } },
        'Γεωργίου Μαρία': { 'Δευτέρα': { 5: 'B33', 6: 'A23' }, 'Τρίτη': { 2: 'B52', 3: 'A23', 7: 'B33' }, 'Τετάρτη': { 1: 'B33', 2: 'B33', 3: 'A23', 4: 'A23' }, 'Πέμπτη': { 2: 'B33', 5: 'B33', 7: 'B33' }, 'Παρασκευή': { 2: 'A23', 4: 'A23', 6: 'B52' } },
        'Γιαννάκου Άντρη': { 'Δευτέρα': { 3: 'B51', 8: 'A41' }, 'Τρίτη': { 1: 'A24', 2: 'A41', 3: 'B51', 5: 'A24', 6: 'A41' }, 'Τετάρτη': { 1: 'A24', 3: 'B51', 5: 'A24', 6: 'A24', 7: 'A41' }, 'Πέμπτη': { 3: 'A24', 5: 'A41' }, 'Παρασκευή': { 3: 'A24', 6: 'B51' } },
        'Δροσοπούλου Κωνσταντίνα': { 'Δευτέρα': { 1: 'A11', 2: 'A11', 4: 'Bkat_1', 5: 'Bkat_1' }, 'Τρίτη': { 3: 'A11', 5: 'Γkat_1', 6: 'Γkat_1' }, 'Τετάρτη': { 2: 'A11', 5: 'A11', 6: 'B41' }, 'Πέμπτη': { 1: 'Γkat_1', 2: 'Γkat_1', 5: 'B32', 6: 'B41' }, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1', 6: 'A11' } },
        'Ευαγγέλου Χρίστου Χριστιάνα': { 'Δευτέρα': { 3: 'A43', 8: 'A32' }, 'Τρίτη': { 1: 'A42', 5: 'Bkat_3', 7: 'A11' }, 'Τετάρτη': { 1: 'A23', 5: 'Bkat_3' }, 'Πέμπτη': { 1: 'A24', 3: 'A31', 5: 'Bkat_3', 6: 'Bkat_3' }, 'Παρασκευή': { 1: 'A41', 6: 'A22', 7: 'A21' } },
        'Ευαγόρου Ευαγόρας': { 'Δευτέρα': { 2: 'A11', 3: 'Γ32', 5: 'A11' }, 'Τρίτη': { 3: 'Γ32', 6: 'Γ32' }, 'Τετάρτη': {}, 'Πέμπτη': { 3: 'Γ32', 4: 'Γ32', 6: 'Γ32' }, 'Παρασκευή': { 1: 'Γ32', 8: 'A11' } },
        'Ευμήδου Άντρη': { 'Δευτέρα': { 2: 'Γkat_3', 3: 'Γkat_3', 7: 'Bkat_1', 8: 'Bkat_1' }, 'Τρίτη': {}, 'Τετάρτη': {}, 'Πέμπτη': {}, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1', 4: 'Γkat_3', 5: 'Γkat_3', 6: 'Γkat_3', 8: 'B1' } },
        'Ευριπίδου Μιχαήλ': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2', 7: 'Bkat_1', 8: 'Bkat_1' }, 'Τρίτη': {}, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2', 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': {}, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1', 6: 'Γkat_2', 7: 'Γkat_2' } },
        'Ευσταθίου Τάσος': { 'Δευτέρα': { 1: 'A32', 2: 'A21', 4: 'A41', 5: 'A41' }, 'Τρίτη': { 1: 'A23', 6: 'A41', 7: 'A41' }, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2', 5: 'A31' }, 'Πέμπτη': { 2: 'A21', 4: 'A21', 6: 'A31', 8: 'A23' }, 'Παρασκευή': { 2: 'A32', 5: 'A21', 6: 'Γkat_2', 7: 'Γkat_2' } },
        'Ζαντή Αιμιλία': { 'Δευτέρα': { 3: 'Γ53', 4: 'Γ31', 5: 'Γ31' }, 'Τρίτη': { 1: 'A22', 2: 'A22', 4: 'Γ31', 7: 'A22' }, 'Τετάρτη': { 2: 'A22', 4: 'Γ31', 6: 'A22' }, 'Πέμπτη': { 2: 'A22', 4: 'Γ31', 8: 'Γ31' }, 'Παρασκευή': { 4: 'Γ31' } },
        'Ζαχαριάδη Μύρω': { 'Δευτέρα': { 2: 'B41', 4: 'Γ52', 5: 'B31' }, 'Τρίτη': { 2: 'Γ52', 6: 'B31', 7: 'B31' }, 'Τετάρτη': { 1: 'B31', 2: 'B41', 4: 'B31' }, 'Πέμπτη': { 1: 'B41', 7: 'B31' }, 'Παρασκευή': { 1: 'Γ52', 5: 'B31', 8: 'B41' } },
        'Ηρακλέους Στυλιανή': { 'Δευτέρα': { 2: 'A31', 3: 'A41', 4: 'A21', 5: 'A24' }, 'Τρίτη': {}, 'Τετάρτη': { 2: 'A24', 3: 'A42' }, 'Πέμπτη': {}, 'Παρασκευή': {} },
        'Θεοφάνους Σάββας': { 'Δευτέρα': { 1: 'B41', 4: 'A21', 5: 'A43', 6: 'A21', 7: 'A21' }, 'Τρίτη': { 3: 'Γ41', 6: 'B41' }, 'Τετάρτη': { 1: 'A43', 3: 'B41', 5: 'B41', 6: 'A21' }, 'Πέμπτη': { 2: 'B41', 5: 'Γ41' }, 'Παρασκευή': { 1: 'A21', 5: 'B41', 6: 'A21', 7: 'A43' } },
        'Ιωακείμ Ιωακείμ': { 'Τρίτη': { 2: 'A23', 3: 'A22' }, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2' }, 'Πέμπτη': { 4: 'A22', 5: 'A22', 8: 'A42' }, 'Παρασκευή': { 6: 'Γkat_2', 7: 'Γkat_2', 8: 'A22' } },
        'Ιωάννου Ξένια': { 'Τρίτη': { 1: 'A21', 2: 'A32', 3: 'A42' }, 'Τετάρτη': {}, 'Πέμπτη': { 1: 'A21', 3: 'A32', 4: 'A42' }, 'Παρασκευή': {} },
        'Ιωάννου Ανθούλα': { 'Δευτέρα': { 2: 'Γ51', 3: 'Γ51', 7: 'Bkat_1', 8: 'Bkat_1' }, 'Τρίτη': { 4: 'Γ51', 6: 'Γkat_1' }, 'Τετάρτη': { 1: 'Γkat_2', 4: 'Γ41', 6: 'Γ51' }, 'Πέμπτη': { 1: 'Γkat_1', 4: 'Γ41' }, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1', 4: 'Γ41', 6: 'Γkat_2' } },
        'Καγιά Ευγενία': { 'Δευτέρα': { 2: 'A41', 4: 'A22' }, 'Τρίτη': { 1: 'B51', 5: 'B31' }, 'Τετάρτη': { 2: 'A22', 5: 'B31', 7: 'A42' }, 'Πέμπτη': { 1: 'A22', 2: 'A41', 5: 'A22' }, 'Παρασκευή': { 1: 'A22', 2: 'A21', 3: 'A21', 5: 'A41', 6: 'A41', 7: 'A42' } },
        'Κονή Λίζα': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2' }, 'Τρίτη': { 3: 'Γkat_1', 4: 'Γkat_1' }, 'Τετάρτη': { 4: 'Bkat_2', 5: 'Bkat_2' }, 'Πέμπτη': { 1: 'Γkat_1' }, 'Παρασκευή': { 5: 'A32', 6: 'A43' } },
        'Κουαλή Έλενα': { 'Δευτέρα': { 1: 'A41', 4: 'A32', 5: 'A32', 8: 'A22' }, 'Τρίτη': { 2: 'A43', 5: 'A23', 6: 'A32' }, 'Τετάρτη': { 1: 'A32', 3: 'A32', 5: 'A22', 6: 'A42' }, 'Πέμπτη': { 4: 'B_Αρχ', 5: 'B52' }, 'Παρασκευή': { 1: 'A42', 2: 'A42', 3: 'A41', 6: 'A32', 7: 'A42' } },
        'Κουντούρης Κυριάκος': { 'Τρίτη': { 1: 'A23', 4: 'A24', 6: 'A42', 7: 'A43' }, 'Τετάρτη': {}, 'Πέμπτη': { 4: 'A43', 6: 'A42', 7: 'A24', 8: 'A24' }, 'Παρασκευή': {} },
        'Κουσούλου Γεωργία': { 'Δευτέρα': { 3: 'A21', 4: 'A21', 7: 'A32', 8: 'A21' }, 'Τρίτη': {}, 'Τετάρτη': {}, 'Πέμπτη': { 5: 'A21', 6: 'A32', 7: 'Γ52' }, 'Παρασκευή': { 2: 'Γ53', 5: 'A21', 8: 'Γ41' } },
        'Κρασίδου Περσεφόνη': { 'Δευτέρα': { 1: 'A42', 3: 'A41', 7: 'Bkat_1', 8: 'Bkat_1' }, 'Τρίτη': { 2: 'A21', 5: 'Γkat_1', 6: 'Γkat_1' }, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2', 6: 'A22' }, 'Πέμπτη': { 1: 'Γkat_1', 2: 'Γkat_1' }, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1', 6: 'Γkat_2', 7: 'Γkat_2' } },
        'Κυπριανού Μ. Μαρία': { 'Δευτέρα': { 1: 'Γ53', 6: 'Γ1', 7: 'Γ1' }, 'Τρίτη': { 1: 'Γ53', 3: 'Γ1' }, 'Τετάρτη': { 4: 'Γ53', 6: 'Γ1' }, 'Πέμπτη': { 5: 'Γ53', 6: 'Γ1', 7: 'Γ1' }, 'Παρασκευή': { 2: 'Γ1', 4: 'Γ53', 5: 'Γ53' } },
        'Κυριάκου Νέδη': { 'Δευτέρα': { 3: 'B33', 4: 'B33', 7: 'A11' }, 'Τρίτη': { 1: 'A11', 5: 'B33' }, 'Τετάρτη': { 1: 'B52', 7: 'A11' }, 'Πέμπτη': { 1: 'B52', 5: 'B52', 7: 'B33' }, 'Παρασκευή': { 1: 'A23', 2: 'A23', 5: 'B52', 8: 'A24' } },
        'Κωνσταντινίδης Παναγιώτης': { 'Δευτέρα': { 6: 'A42', 7: 'A41', 8: 'Γ31' }, 'Τρίτη': { 1: 'Γ52', 2: 'Γ51', 3: 'Γ53' }, 'Τετάρτη': { 3: 'A41', 4: 'A42', 6: 'Γ1' }, 'Πέμπτη': { 1: 'Γ32', 3: 'B33', 4: 'Γ52', 6: 'Γ41' }, 'Παρασκευή': { 3: 'B52', 4: 'Γ51', 5: 'Γ32', 6: 'B33' } },
        'Κωνσταντίνου Δέσπω': { 'Τρίτη': { 2: 'A41', 3: 'Γ_Γαλ', 4: 'Γ_Γαλ' }, 'Τετάρτη': {}, 'Πέμπτη': { 2: 'A32', 3: 'A41', 4: 'A32' }, 'Παρασκευή': {} },
        'Λοϊζιά Λευκή': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2' }, 'Τρίτη': { 6: 'Γkat_1', 7: 'Γkat_1' }, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2', 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': { 1: 'Γkat_1', 2: 'Γkat_1' }, 'Παρασκευή': { 6: 'Γkat_2', 7: 'Γkat_2' } },
        'Λουκαΐδης Γιώργος': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2' }, 'Τρίτη': {}, 'Τετάρτη': { 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': {}, 'Παρασκευή': {} },
        'Μακρή Αμαλία': { 'Δευτέρα': { 1: 'A23', 4: 'A43', 7: 'Γkat_1', 8: 'Bkat_1' }, 'Τρίτη': { 4: 'Β_Αγγ', 7: 'A43' }, 'Τετάρτη': { 1: 'Γkat_1', 2: 'Γkat_1', 6: 'A43', 7: 'A23' }, 'Πέμπτη': { 1: 'Bkat_1', 2: 'Bkat_1', 4: 'A43' }, 'Παρασκευή': { 6: 'B1' } },
        'Μαρκίδου Στέφανη': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2', 7: 'Γ51' }, 'Τρίτη': { 1: 'Γkat_2', 2: 'Γkat_2', 5: 'Bkat_2' }, 'Τετάρτη': { 3: 'Γ51', 6: 'Γ1' }, 'Πέμπτη': { 3: 'Γ1', 5: 'Γ51', 7: 'Γ51' }, 'Παρασκευή': { 5: 'Γkat_2', 7: 'Γkat_2', 8: 'Γ51' } },
        'Μαρκούλη Άντρη': { 'Δευτέρα': { 2: 'A24', 3: 'A24', 4: 'A43', 6: 'A24' }, 'Τρίτη': { 1: 'A24', 4: 'A23' }, 'Τετάρτη': { 1: 'A23', 2: 'A23', 4: 'A24', 6: 'A24', 7: 'A41' }, 'Πέμπτη': { 1: 'A23', 4: 'A31', 6: 'A23' }, 'Παρασκευή': { 1: 'A43', 2: 'A31', 3: 'A24', 4: 'A24', 6: 'A23', 8: 'A23' } },
        'Μιχαήλ Παναγιώτα': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2' }, 'Τρίτη': {}, 'Τετάρτη': { 1: 'Γkat_1', 2: 'Γkat_1', 6: 'Γkat_1', 7: 'Γkat_1' }, 'Πέμπτη': {}, 'Παρασκευή': {} },
        'Νεοφύτου Γεωργίου Θεονίτσα': { 'Δευτέρα': { 1: 'Γ52', 3: 'B31', 6: 'B31' }, 'Τρίτη': { 2: 'B31', 3: 'A32' }, 'Τετάρτη': { 2: 'B31', 4: 'B31', 6: 'Γ52' }, 'Πέμπτη': { 5: 'A32', 7: 'A32' }, 'Παρασκευή': { 3: 'B31', 6: 'A32', 8: 'B31' } },
        'Νικηφόρου Μαρία': { 'Δευτέρα': { 1: 'Γ52', 7: 'Γ41' }, 'Τρίτη': { 2: 'Γ52', 3: 'Γ41', 4: 'Γ32' }, 'Τετάρτη': { 2: 'B31', 3: 'Γ41', 4: 'Γ52', 7: 'Γ52' }, 'Πέμπτη': { 3: 'Γ52', 7: 'Γ32' }, 'Παρασκευή': { 5: 'Γ52', 7: 'B31' } },
        'Νίκου Χριστάκης': { 'Δευτέρα': { 2: 'B41' }, 'Τρίτη': { 3: 'B33' }, 'Τετάρτη': { 3: 'A42' }, 'Πέμπτη': { 3: 'Γ51' }, 'Παρασκευή': { 3: 'A42', 4: 'B33', 5: 'B33', 6: 'B33' } },
        'Ξενοφώντος Μαρία': { 'Δευτέρα': { 3: 'A11', 4: 'A21', 8: 'A11' }, 'Τρίτη': { 1: 'A22', 5: 'A41', 6: 'A22' }, 'Τετάρτη': { 2: 'A31', 3: 'A11', 7: 'A23' }, 'Πέμπτη': { 1: 'A41', 2: 'A32', 5: 'A41', 6: 'A22' }, 'Παρασκευή': { 3: 'A31', 5: 'A21', 6: 'A32', 7: 'A23' } },
        'Οδυσσέως Ευριδίκη': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2' }, 'Τρίτη': {}, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2', 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': { 1: 'A32', 2: 'A11', 3: 'A32', 5: 'A32', 6: 'A21' }, 'Παρασκευή': {} },
        'Οικονομίδου Μυρία': { 'Δευτέρα': { 1: 'Γ41', 6: 'Γ53', 7: 'Γ41' }, 'Τρίτη': { 1: 'Γ52', 5: 'Γ41' }, 'Τετάρτη': { 3: 'Γ31', 6: 'Γ41', 7: 'Γ41' }, 'Πέμπτη': { 3: 'Γ53', 5: 'Γ41' }, 'Παρασκευή': { 2: 'Γ31', 3: 'Γ53', 4: 'Γ41' } },
        'Ορφανίδου Δώρα': { 'Δευτέρα': { 1: 'A31', 2: 'Γ32' }, 'Τρίτη': { 2: 'B32', 6: 'B32' }, 'Τετάρτη': { 2: 'B32', 7: 'Γ32' }, 'Πέμπτη': { 5: 'A31', 6: 'A41' }, 'Παρασκευή': { 5: 'B32', 7: 'Γ32', 8: 'Γ32' } },
        'Παναγιώτου Αδελίνα': { 'Δευτέρα': { 1: 'A22', 2: 'Γkat_3', 3: 'Γkat_3', 4: 'B32' }, 'Τρίτη': { 1: 'B41', 4: 'Bkat_3' }, 'Τετάρτη': { 4: 'B32', 5: 'Bkat_3' }, 'Πέμπτη': { 4: 'Bkat_3', 6: 'Bkat_3' }, 'Παρασκευή': { 4: 'B32', 5: 'Γkat_3', 6: 'Γkat_3', 8: 'B32' } },
        'Παναγιώτου Δημήτριος': { 'Δευτέρα': { 2: 'A24', 5: 'B41', 6: 'A22', 7: 'A43', 8: 'A23' }, 'Τρίτη': { 2: 'B1', 3: 'A43', 4: 'A32' }, 'Τετάρτη': { 2: 'B32', 3: 'B1', 5: 'B31', 7: 'A31' }, 'Πέμπτη': { 2: 'A11', 3: 'B32', 5: 'B51' }, 'Παρασκευή': { 2: 'B51', 5: 'A24', 6: 'B31', 7: 'B41' } },
        'Παναγιώτου Ελένη': { 'Δευτέρα': { 2: 'A31', 8: 'Γ53' }, 'Τρίτη': { 2: 'Γ53', 3: 'A31' }, 'Τετάρτη': { 1: 'B41', 4: 'Γ53', 6: 'B41' }, 'Πέμπτη': { 2: 'A24', 5: 'A42', 7: 'A42' }, 'Παρασκευή': { 1: 'Γ52', 2: 'Γ52', 4: 'A31', 6: 'B41' } },
        'Παπαδόπουλος Γεώργιος': { 'Δευτέρα': { 1: 'A11', 2: 'A23' }, 'Τρίτη': { 3: 'Γ_Γαλ', 5: 'Γ_Γαλ' }, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2', 7: 'A23' }, 'Πέμπτη': { 3: 'Γ32', 5: 'A21' }, 'Παρασκευή': { 1: 'A11', 2: 'A42', 5: 'Γkat_2', 6: 'A21', 8: 'Γkat_2' } },
        'Παπαδοπούλου Μαρίνα': { 'Δευτέρα': { 1: 'Γ51' }, 'Τρίτη': { 2: 'Γ31' }, 'Τετάρτη': { 5: 'Γ31', 6: 'Γ31' }, 'Πέμπτη': { 1: 'A32', 2: 'A41', 4: 'Γ31', 6: 'A42', 7: 'A41' }, 'Παρασκευή': { 1: 'Γ31', 3: 'Γ51', 4: 'A24', 5: 'Γ51' } },
        'Περικλέους Γιώργουλα': { 'Δευτέρα': { 5: 'Γ_Αγγ', 6: 'Γ_Αγγ' }, 'Τρίτη': { 2: 'B52', 3: 'Β_Αγγ', 5: 'B52' }, 'Τετάρτη': { 2: 'A22', 6: 'Γ53', 7: 'Γ53' }, 'Πέμπτη': { 2: 'B52', 4: 'Γ53', 5: 'Γ53' }, 'Παρασκευή': { 2: 'Γ53', 6: 'A22' } },
        'Πέτρου Άγγελα': { 'Δευτέρα': { 3: 'Β_Αγγ', 4: 'B51', 6: 'A11', 7: 'B51' }, 'Τρίτη': { 2: 'B51', 3: 'A21', 7: 'A11', 8: 'B51' }, 'Τετάρτη': { 2: 'A21' }, 'Πέμπτη': { 4: 'Β_Αγγ' }, 'Παρασκευή': { 5: 'B51', 7: 'B51' } },
        'Πιτσίλλος Χρίστος': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2', 5: 'A23', 6: 'A31' }, 'Τρίτη': {}, 'Τετάρτη': { 3: 'A43', 4: 'A32', 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': {}, 'Παρασκευή': {} },
        'Ποιητάρης Ευαγόρας': { 'Δευτέρα': { 1: 'A42', 2: 'A42', 3: 'B1', 6: 'B1', 8: 'A42' }, 'Τρίτη': {}, 'Τετάρτη': { 2: 'A42' }, 'Πέμπτη': { 2: 'B1', 4: 'B1' }, 'Παρασκευή': { 2: 'A43', 3: 'B1' } },
        'Σβανά Καλιάνα': { 'Δευτέρα': { 1: 'Γkat_2', 2: 'Γkat_2', 3: 'A22', 4: 'A23', 6: 'Γkat_1' }, 'Τρίτη': { 1: 'Γkat_1', 2: 'Γkat_1', 7: 'Bkat_1', 8: 'Bkat_1' }, 'Τετάρτη': { 5: 'B31' }, 'Πέμπτη': { 5: 'A11' }, 'Παρασκευή': { 6: 'Γkat_2', 7: 'Γkat_2' } },
        'Σολομωνίδου Ευτυχία': { 'Δευτέρα': { 2: 'B32', 4: 'B41', 5: 'B51' }, 'Τρίτη': { 1: 'B41', 3: 'Γ_Γαλ', 7: 'B31' }, 'Τετάρτη': { 3: 'B51', 4: 'B52', 5: 'Bkat_3' }, 'Πέμπτη': { 1: 'Γ53', 3: 'B32', 5: 'Bkat_3', 6: 'Bkat_3' }, 'Παρασκευή': { 3: 'Γ52', 5: 'Β_Γαλ' } },
        'Σπυρίδωνος Μαρία': { 'Δευτέρα': { 1: 'Γ31', 3: 'A11', 4: 'A22', 7: 'Γ31' }, 'Τρίτη': { 1: 'B1', 4: 'A22' }, 'Τετάρτη': { 4: 'A11', 6: 'A43', 7: 'Γ31' }, 'Πέμπτη': { 4: 'A22', 5: 'A22', 6: 'Γ31' }, 'Παρασκευή': { 2: 'A11', 5: 'Γ31' } },
        'Στασούλλη Χαρίκλεια': { 'Δευτέρα': { 1: 'A43', 2: 'A43' }, 'Τρίτη': { 1: 'B33', 4: 'A31', 6: 'B41', 7: 'B41' }, 'Τετάρτη': { 2: 'A43', 3: 'A43', 4: 'A31' }, 'Πέμπτη': { 1: 'B51', 7: 'A31' }, 'Παρασκευή': { 5: 'B51', 7: 'A31', 8: 'A31' } },
        'Συκοπετρίτης Ιωακείμ': { 'Δευτέρα': { 4: 'A41' }, 'Τρίτη': { 6: 'A41', 7: 'A41' }, 'Τετάρτη': { 5: 'A43' }, 'Πέμπτη': {}, 'Παρασκευή': {} },
        'Σωτηριάδου Κίννη Μαρία': { 'Τρίτη': { 1: 'Γ52', 5: 'Γ52' }, 'Τετάρτη': { 2: 'A31', 3: 'Γ52' }, 'Πέμπτη': {}, 'Παρασκευή': { 1: 'Γ52', 4: 'Γ52', 5: 'Γ52', 8: 'A31' } },
        'Τέρζη Άννα': { 'Τρίτη': { 1: 'A43', 2: 'B51', 3: 'B51', 5: 'B51' }, 'Τετάρτη': {}, 'Πέμπτη': { 3: 'A43', 4: 'B51', 6: 'A43' }, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1' } },
        'Τρυγωνάκη Μαρία': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2' }, 'Τρίτη': {}, 'Τετάρτη': { 1: 'Γkat_1', 2: 'Γkat_1', 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': {}, 'Παρασκευή': {} },
        'Φελλά Ορφέας': { 'Δευτέρα': { 3: 'Γ52+Γ53', 4: 'Β11+Β32', 5: 'Α31+Α32', 8: 'Γ41+Γ51' }, 'Τρίτη': { 1: 'Γ1+Γ31+Γ32', 2: 'Γ1+Γ31+Γ32', 5: 'Α11+Α43', 6: 'Β33+Β51+B52' }, 'Τετάρτη': { 4: 'Α21+A22', 5: 'Α41+Α42', 6: 'Α31+Α32' }, 'Πέμπτη': { 3: 'Β33+Β51+B52', 4: 'Γ41+Γ51', 8: 'Γ52+Γ53' }, 'Παρασκευή': { 3: 'Α23+Α24', 4: 'Α21+A22', 5: 'Β31+Β41', 6: 'Β11+Β32' } },
        'Χαραλάμπους Θάσος': { 'Δευτέρα': { 1: 'A24', 5: 'A21', 7: 'Bkat_1', 8: 'Bkat_1' }, 'Τρίτη': { 1: 'A32', 2: 'A24' }, 'Τετάρτη': { 1: 'Γkat_2', 2: 'Γkat_2' }, 'Πέμπτη': { 4: 'A21' }, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1', 5: 'Γkat_2', 6: 'Γkat_2', 8: 'A32' } },
        'Χατζηνικολάου Γεωργία': { 'Τρίτη': { 1: 'A24', 3: 'Γ_Γαλ', 4: 'Γ_Γαλ', 6: 'A43' }, 'Τετάρτη': {}, 'Πέμπτη': { 1: 'A31', 3: 'Β_Γαλ', 5: 'Β_Γαλ', 6: 'A24' }, 'Παρασκευή': { 2: 'A43', 5: 'A31' } },
        'Χειλιμίνδρη Αυγή': { 'Δευτέρα': { 1: 'A21', 2: 'A21' }, 'Τρίτη': {}, 'Τετάρτη': { 1: 'A21', 2: 'A21' }, 'Πέμπτη': { 5: 'A21', 7: 'A21' }, 'Παρασκευή': { 8: 'A21' } },
        'Χειμωνίδης Γιώργος': { 'Δευτέρα': { 2: 'A24' }, 'Τρίτη': { 1: 'Γ1', 6: 'Γkat_1', 7: 'Γkat_1' }, 'Τετάρτη': {}, 'Πέμπτη': { 1: 'Γkat_1', 2: 'Γkat_1', 4: 'B1' }, 'Παρασκευή': { 6: 'A11' } },
        'Χουβαρτά Χρύση': { 'Δευτέρα': { 1: 'Γ32', 3: 'Γ32', 4: 'Γ1', 5: 'Γ1' }, 'Τρίτη': { 5: 'A31' }, 'Τετάρτη': { 3: 'Γ1', 6: 'Γ32' }, 'Πέμπτη': { 3: 'Γ1', 4: 'Γ32', 6: 'Γ32' }, 'Παρασκευή': { 2: 'Γ32', 6: 'Γ32', 8: 'A31' } },
        'Χρίστου Γιάννης': { 'Δευτέρα': { 1: 'Γ1', 2: 'Γ41', 3: 'Γ41' }, 'Τρίτη': { 2: 'Γ41', 3: 'Γ41' }, 'Τετάρτη': { 3: 'Γ41', 4: 'Γ1' }, 'Πέμπτη': { 1: 'Γ41', 4: 'Γ41' }, 'Παρασκευή': { 2: 'Γ41' } },
        'Χρίστου Ευδοκία': { 'Δευτέρα': { 1: 'A23', 2: 'B31' }, 'Τρίτη': { 2: 'B31', 3: 'B52', 4: 'A23' }, 'Τετάρτη': { 2: 'B31', 6: 'A23' }, 'Πέμπτη': { 1: 'B31', 4: 'B51', 5: 'A24', 6: 'B31' }, 'Παρασκευή': { 4: 'A24', 5: 'A23', 6: 'A24', 7: 'A23', 8: 'A24' } },
        'Χρίστου Πρόδρομος': { 'Δευτέρα': { 1: 'Bkat_2', 2: 'Bkat_2', 5: 'A11' }, 'Τρίτη': { 4: 'A22', 6: 'A22' }, 'Τετάρτη': { 2: 'A11', 3: 'A42', 6: 'Bkat_2', 7: 'Bkat_2' }, 'Πέμπτη': { 1: 'A24', 3: 'A22', 5: 'A42', 7: 'A43' }, 'Παρασκευή': { 1: 'Bkat_1', 2: 'Bkat_1', 3: 'A11', 4: 'A11' } },
        'Χριστοφή Ανθή': { 'Δευτέρα': { 3: 'A31', 4: 'A31', 5: 'Γ51' }, 'Τρίτη': { 1: 'A31', 2: 'B32', 5: 'B32' }, 'Τετάρτη': { 4: 'B32', 5: 'B32', 6: 'Γ51' }, 'Πέμπτη': { 1: 'A31', 4: 'B32', 6: 'B32' }, 'Παρασκευή': { 5: 'A31', 6: 'B32', 7: 'A31' } }
    };
    
    // === DOM ELEMENTS & STATE (initialized in initializeApp) ===
    let teacherSelect, departmentSearchInput, scheduleDisplay, printBtn, printTitle;
    
    // === FUNCTIONS ===
    
    function initializeDOMElements() {
        teacherSelect = document.getElementById('teacher-select');
        departmentSearchInput = document.getElementById('department-search-input');
        scheduleDisplay = document.getElementById('schedule-display');
        printBtn = document.getElementById('print-btn');
        printTitle = document.getElementById('print-title');
    }

    function populateTeacherSelect() {
        if (!teacherSelect) return;
        teacherSelect.innerHTML = '<option value="">-- Επιλογή --</option>';
        const sortedTeachers = [...Object.keys(teacherSchedules)].sort((a, b) => a.localeCompare(b));
        sortedTeachers.forEach(teacher => {
            const option = document.createElement('option');
            option.value = teacher;
            option.textContent = toTitleCase(teacher);
            teacherSelect.appendChild(option);
        });
    }
    
    function renderScheduleByTeacher(teacherName) {
        if (!scheduleDisplay || !printTitle) return;
        
        let teacherData = teacherSchedules[teacherName] || teacherSchedules[toTitleCase(teacherName)];
        
        if (!teacherName || !teacherData) {
            scheduleDisplay.innerHTML = '';
            printTitle.textContent = '';
            return;
        }
    
        printTitle.textContent = `Ωρολόγιο Πρόγραμμα - ${toTitleCase(teacherName)}`;
        const days = ['Δευτέρα', 'Τρίτη', 'Τετάρτη', 'Πέμπτη', 'Παρασκευή'];
        const periods = [1, 2, 3, 4, 5, 6, 7, 8];
    
        let tableHTML = '<table class="schedule-table">';
        tableHTML += '<thead><tr><th></th>';
        days.forEach(day => tableHTML += `<th>${day}</th>`);
        tableHTML += '</tr></thead><tbody>';
    
        periods.forEach(period => {
            tableHTML += `<tr><td class="period-header">${period}η</td>`;
            days.forEach(day => {
                const classInfo = teacherData[day]?.[period] || '';
                tableHTML += `<td>${formatScheduleEntry(classInfo)}</td>`;
            });
            tableHTML += '</tr>';
        });
    
        tableHTML += '</tbody></table>';
        scheduleDisplay.innerHTML = tableHTML;
    }

    function renderScheduleByDepartment(departmentId) {
        if (!scheduleDisplay || !printTitle) {
            return;
        }
        if(!departmentId){
            scheduleDisplay.innerHTML = '';
            printTitle.textContent = '';
            return;
        }

        const departmentSchedule = {};
        const days = ['Δευτέρα', 'Τρίτη', 'Τετάρτη', 'Πέμπτη', 'Παρασκευή'];
        const periods = [1, 2, 3, 4, 5, 6, 7, 8];

        days.forEach(day => {
            departmentSchedule[day] = {};
            periods.forEach(period => {
                departmentSchedule[day][period] = '';
            });
        });

        const searchTerm = departmentId.toUpperCase();
        printTitle.textContent = `Ωρολόγιο Πρόγραμμα - Τμήμα ${searchTerm}`;

        const getCotaughtContext = (classInfo, currentDept) => {
            const parts = classInfo.toUpperCase().split('+').map(p => p.trim().split(' ')[0]); // Get only the dept part
            if (parts.length > 1) {
                const otherDepts = parts.filter(p => p !== currentDept);
                if (otherDepts.length > 0) {
                    return ` (με ${otherDepts.join(', ')})`;
                }
            }
            return '';
        };

        for (const teacher in teacherSchedules) {
            for (const day in teacherSchedules[teacher]) {
                for (const period in teacherSchedules[teacher][day]) {
                    const classInfo = teacherSchedules[teacher][day][period];
                    if (classInfo.toUpperCase().includes(searchTerm)) {
                        const context = getCotaughtContext(classInfo, searchTerm);
                        const entry = `${toTitleCase(teacher)}${context}`;
                        departmentSchedule[day][period] += (departmentSchedule[day][period] ? '<br>' : '') + entry;
                    }
                }
            }
        }

        let tableHTML = '<table class="schedule-table">';
        tableHTML += `<thead><tr><th>${searchTerm}</th>`;
        days.forEach(day => tableHTML += `<th>${day}</th>`);
        tableHTML += '</tr></thead><tbody>';

        periods.forEach(period => {
            tableHTML += `<tr><td class="period-header">${period}η</td>`;
            days.forEach(day => {
                const teacherName = departmentSchedule[day][period] || '';
                tableHTML += `<td>${teacherName}</td>`;
            });
            tableHTML += '</tr>';
        });

        tableHTML += '</tbody></table>';
        scheduleDisplay.innerHTML = tableHTML;
    }

    const debounce = (func, timeout = 300) => {
        let timer;
        return (...args) => {
            clearTimeout(timer);
            timer = setTimeout(() => { func.apply(this, args); }, timeout);
        };
    };

    function initializeApp() {
        initializeDOMElements();
        populateTeacherSelect();

        if (teacherSelect) {
            teacherSelect.addEventListener('change', (e) => {
                if (departmentSearchInput) departmentSearchInput.value = '';
                renderScheduleByTeacher(e.target.value);
            });
        }
    
        if (departmentSearchInput) {
            departmentSearchInput.addEventListener('input', debounce((e) => {
                if (teacherSelect) teacherSelect.value = '';
                renderScheduleByDepartment(e.target.value);
            }, 300));
        }

        if(printBtn) {
            printBtn.addEventListener('click', () => {
                window.print();
            });
        }
    }
    
    // === APP START ===
    initializeApp();
});

